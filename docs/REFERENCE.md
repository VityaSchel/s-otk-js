## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–í–Ω–∏–º–∞–Ω–∏–µ! –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –º–µ—Ç–æ–¥—ã –∑–¥–µ—Å—å –º–æ–≥—É—Ç –∏–º–µ—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à—É—é —Å–∏–≥–Ω–∞—Ç—É—Ä—É. –õ—É—á—à–µ –æ—Ä–∏–µ–Ω—Ç–∏—Ä—É–π—Ç–µ—Å—å –ø–æ —Ç–∞–π–ø–∏–Ω–≥–∞–º –≤ TypeScript, –æ–Ω–∏ –≤—Å–µ–≥–¥–∞ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ.

### login({ username: string, password: string }): Promise\<{ sessionToken, authToken, csrfToken }\>

–í—Ö–æ–¥ –≤ –∞–∫–∫–∞—É–Ω—Ç, –∏—Å–ø–æ–ª—å–∑—É—è –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å. –≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–∑–≤–∞–Ω –ø–µ—Ä–µ–¥ –ª—é–±—ã–º–∏ –¥—Ä—É–≥–∏–º–∏ –º–µ—Ç–æ–¥–∞–º–∏. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ, –≤—ã –º–æ–∂–µ—Ç–µ –Ω–∞–ø—Ä—è–º—É—é —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–∫–µ–Ω, –∏—Å–ø–æ–ª—å–∑—É—è —Å–≤–æ–π—Å—Ç–≤–æ `credentials` –Ω–∞ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –∫–ª–∞—Å—Å–∞ SOTKAPI:

```javascript
SOTK.credentials = { 
  token: 'zYQgRaCky9Ca9EFMTJjUNUTgkN', 
  authToken: 'HGrpB9KWRnRRNKrsY8jdfvesBl75xb5D',
  csrfToken: 'd2fd482bcd8a578e0dd129f25651f0d2' 
}
```

### logout(): Promise

–£–¥–∞–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –Ω–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç–∫–∑–µ–º–ø–ª—è—Ä –≤–æ–æ–±—â–µ –∏–ª–∏ –ø–æ—Å–ª–µ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—Ö–æ–¥–∞ –≤—ã–∑–≤–∞—Ç—å getAccountInfo.

### getAccountInfo(): Promise\<AccountInfo\>

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –¥—Ä—É–≥–∏—Ö –º–µ—Ç–æ–¥–æ–≤ –∏ —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤–∞–º. –û–Ω –Ω—É–∂–µ–Ω –ª–∏—à—å –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–∫–∫–∞—É–Ω—Ç–µ –¥–ª—è —Ç–∞–∫–∏—Ö –º–µ—Ç–æ–¥–æ–≤, –∫–∞–∫, –Ω–∞–ø—Ä–∏–º–µ—Ä, getCards. –û–Ω –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –∏ –ø–æ—Å–ª–µ —á–µ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ —Å–≤–æ–π—Å—Ç–≤–µ `accountInfo` –≤ —ç–∫–∑–µ–º–ø–ª—è—Ä–µ –∫–ª–∞—Å—Å–∞. –ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –¥–ª—è –¥—Ä—É–≥–∏—Ö –º–µ—Ç–æ–¥–æ–≤, –Ω–∞–ø—Ä–∏–º–µ—Ä –ø–æ–µ–∑–¥–∫–∏, –µ–≥–æ —Å—Ç–æ–∏—Ç –≤—ã–∑–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–º –æ–±—Ä–∞–∑–æ–º:

```javascript
await SOTK.getAccountInfo()
```

–¢–∞–∫–∂–µ –æ–Ω –º–æ–∂–µ—Ç –ø–æ–Ω–∞–¥–æ–±–∏—Ç—å—Å—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Ç–æ–∫–µ–Ω–æ–≤ –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ HTML-–∫–æ–¥–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –∞–∫–∫–∞—É–Ω—Ç–∞, –ø–æ–¥—Ä–æ–±–Ω–µ–µ —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ AccountInfo.

### Interface AccountInfo

–ö–ª—é—á|–¢–∏–ø|–û–ø–∏—Å–∞–Ω–∏–µ
---|---|---
root|node-html-parser:HTMLElement|–ö–æ—Ä–µ–Ω—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã
balance|object\<token, pid\>|–¢–æ–∫–µ–Ω—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞ –±–∞–ª–∞–Ω—Å–∞
delCard|object\<token, pid\>|
addCard|object\<token, pid\>|
history|object\<token, pid\>|

### getCardInfo(cardID: number): Promise\<CardInfo\>

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ä—Ç–µ, –∏—Å–ø–æ–ª—å–∑—É—è –µ—ë –Ω–æ–º–µ—Ä (–Ω–∞–ø–µ—á–∞—Ç–∞–Ω –Ω–∞ –æ–±—Ä–∞—Ç–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ). –ï—Å–ª–∏ –∫–∞—Ä—Ç–∞ –Ω–µ –Ω–∞–π–¥–µ–Ω–∞, –º–µ—Ç–æ–¥ –∑–∞–≤–µ—Ä—à–∞–µ—Ç—Å—è –æ—à–∏–±–∫–æ–π "Card ID not found".

### Interface CardInfo

–û–±—ä–µ–∫—Ç —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –ø—Ä–æ –ø—Ä–æ–µ–∑–¥–Ω—É—é –∫–∞—Ä—Ç—É

–ö–ª—é—á|–¢–∏–ø|–û–ø–∏—Å–∞–Ω–∏–µ
---|---|---
short|string (cast to number)|–°—Ç—Ä–æ–∫–∞ —Å –Ω–æ–º–µ—Ä–æ–º –∫–∞—Ä—Ç—ã, –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –Ω—É–ª–∏ –≤ –Ω–∞—á–∞–ª–µ
ctg|number|–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
ctgdesc|string|–û–ø–∏—Å–∞–Ω–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä "–ö–∞—Ä—Ç–∞ –®–∫–æ–ª—å–Ω–∏–∫–∞"
balance|string (cast to number)|–°—Ç—Ä–æ–∫–∞, —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –±–∞–ª–∞–Ω—Å –∫–∞—Ä—Ç—ã, –¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –æ—Ç–¥–µ–ª—è–µ—Ç—Å—è —Ç–æ—á–∫–æ–π
st_limit|null|–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ
type|string|–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–æ

### getCards(): Promise\<Array\<Card\>\>

–ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º –∫–∞—Ä—Ç. –¢–∞–∫–∂–µ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è –ø–æ–ª–µ–∑–Ω—ã–µ –º–µ—Ç–æ–¥—ã, —Å–º. –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Card.

### Interface Card

–ö–∞—Ä—Ç–∞, –¥–æ–±–∞–≤–ª–µ–Ω–Ω–∞—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º.

–ö–ª—é—á|–¢–∏–ø|–û–ø–∏—Å–∞–Ω–∏–µ
---|---|---
number|string (cast to number)|–ù–æ–º–µ—Ä –∫–∞—Ä—Ç—ã
getInfo|function|–ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –∫–∞—Ä—Ç–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä –±–∞–ª–∞–Ω—Å
getHistory|function|–ú–µ—Ç–æ–¥ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –∫–∞—Ä—Ç—ã
delete|function|–ú–µ—Ç–æ–¥ –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∫–∞—Ä—Ç—ã –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞

### addCard(cardID: number): Promise\<string\>

–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã –≤ –∞–∫–∫–∞—É–Ω—Ç. –°–º. –Ω–∏–∂–µ (—Ä–∞–∑–¥–µ–ª "–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã (1)"), –∫–∞–∫–∏–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–≤–µ—Ç—ã.

### deleteCard(cardID: number): Promise\<string\>

–£–¥–∞–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç—ã –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞. –°–º. –Ω–∏–∂–µ (—Ä–∞–∑–¥–µ–ª "–£–¥–∞–ª–µ–Ω–∏–µ –∫–∞—Ä—Ç—ã (2)"), –∫–∞–∫–∏–µ –º–æ–≥—É—Ç –±—ã—Ç—å –æ—Ç–≤–µ—Ç—ã.

### getHistory(cardID: number, startDate: Date, endDate: Date): Promise\<Array\<HistoryOperation\>\>

–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–π –ø–æ –∫–∞—Ä—Ç–µ, –Ω–∞—á–∏–Ω–∞—è —Å startDate –∏ –∑–∞–∫–∞–Ω—á–∏–≤–∞—è endDate. –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏, —Å–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –≤ –ø–æ–ª–Ω–æ—á—å –ø–æ –°–∞–º–∞—Ä—Å–∫–æ–º—É –≤—Ä–µ–º–µ–Ω–∏, –Ω–æ —ç—Ç–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ. 

### Interface HistoryOperation

–û–±—ä–µ–∫—Ç, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –æ–ø–µ—Ä–∞—Ü–∏—é –ø–æ –∫–∞—Ä—Ç–µ.

–ö–ª—é—á|–¢–∏–ø|–û–ø–∏—Å–∞–Ω–∏–µ
---|---|---
dt|string|–î–∞—Ç–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–µ "dd mm yyyy hh:mm:ss"
sum|string (cast to number)|–°—É–º–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏, –¥—Ä–æ–±–Ω–∞—è —á–∞—Å—Ç—å –æ—Ç–¥–µ–ª–µ–Ω–∞ —Ç–æ—á–∫–æ–π
code|string (cast to number)|–ù–æ–º–µ—Ä –º–∞—Ä—à—Ä—É—Ç–∞
vichle|string (cast to number)|–¢–∏–ø –ø–æ–µ–∑–¥–∫–∏, –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–∫–∞–∑–∞–Ω—ã –Ω–∏–∂–µ

### createInvoice(cardID: number, sum: number): Promise\<formUrl: string\>

–°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–≤–æ–π—Å–∞ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞—Ä—Ç—ã, –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è formURL, –∫–æ—Ç–æ—Ä—ã–π –º–æ–∂–Ω–æ –æ—Ç–∫—Ä—ã—Ç—å –≤ –±—Ä–∞—É–∑–µ—Ä–µ –¥–ª—è –æ–ø–ª–∞—Ç—ã –≤ —à–ª—é–∑–µ —Å–±–µ—Ä–±–∞–Ω–∫–∞.

**sum –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ –∫–æ–ø–µ–π–∫–∞—Ö, –Ω–∞–ø—Ä–∏–º–µ—Ä 10 —Ä—É–±–ª–µ–π —ç—Ç–æ sum=1000**

### –¢–∏–ø—ã –ø–æ–µ–∑–¥–æ–∫

–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ –∏–∑ https://s-otk.ru/modules/mod_lkabinet/js/main.js

```js
vichles[103456789]="–ú–µ—Ç—Ä–æ";
vichles[203456789]="–¢—Ä–æ–ª–ª–µ–π–±—É—Å";
vichles[303456789]="–¢—Ä–∞–º–≤–∞–π";
vichles[403456789]="–ê–≤—Ç–æ–±—É—Å –≥–æ—Ä.";
vichles[603456789]="–ê–≤—Ç–æ–±—É—Å –æ–±–ª.";
vichles[803456789]="–ü–æ–µ–∑–¥";
```

### **static** passwordRecovery(email, gCaptchaResponse): Promise

**–î–ª—è –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–æ–¥ –∫–∞–ø—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º**

(todo)

### register(name: string, username: string, email: string, password: string): Promise

**–î–ª—è –≤—ã–∑–æ–≤–∞ –º–µ—Ç–æ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤–≤–æ–¥ –∫–∞–ø—á–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º**

(todo)

–ü—Ä–∏–º–µ—Ä —Å—Å—ã–ª–∫–∏, –ø—Ä–∏—Ö–æ–¥—è—â–µ–π –Ω–∞ –ø–æ—á—Ç—É:

`https://s-otk.ru/index.php/registration?task=registration.activate&token=(—Å–ª—É—á–∞–π–Ω—ã–π —Ç–æ–∫–µ–Ω –≤–∏–¥–∞ /^[a-f0-9]{32})$/`

*–í–æ–∑–º–æ–∂–Ω–æ —ç—Ç–æ—Ç —Ç–æ–∫–µ–Ω ‚Äî —ç—Ç–æ –ø—Ä–æ—Å—Ç–æ —Ö–µ—à md5 —á–µ–≥–æ-–Ω–∏–±—É–¥—å, —è –Ω–µ –∑–Ω–∞—é, —á–µ–≥–æ –º–æ–∂–Ω–æ –æ–∂–∏–¥–∞—Ç—å –æ—Ç –û–¢–ö* üòÇ